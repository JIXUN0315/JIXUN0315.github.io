<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Bootstrap demo</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <style>
        * {
            font-family: "微軟正黑體";
        }
        .title {
            width: 100px;
        }

        input:checked+label {
            outline: 5px solid rgb(185, 185, 185);
        }

        .colorCircle {
            width: 40px;
            height: 40px;
            border-radius: 50%;
        }

        .content {
            transition: .2s;
        }

        .content:active {
            background-color: rgb(65, 65, 67);
            color: white;
            outline: 5px solid rgb(139, 139, 255);
        }

        .total {
            font-weight: 900;
            font-size: 53px;
        }

        .img {
            vertical-align: middle;
        }

        .text {
            min-height: 80px;
        }

        span {
            color: rgb(158, 158, 158);
        }

        .pos {
            position: sticky;
            top: 0;
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="row justify-content-center">
            <button class="title m-1 btn bg-dark text-white">Mac</button>
            <button class="title m-1 btn bg-dark text-white">iPad</button>
            <button class="title m-1 btn bg-dark text-white">iPhone</button>
            <button class="title m-1 btn bg-dark text-white">iWatch</button>
        </div>
        <div class="row top">
            <!-- <div class="col-12 col-md-4 px-3 d-flex flex-column justify-content-center align-items-center">
                <img src="iphone11-select-2019-family.png" class="w-75">
                <p class="mt-2 fs-4 fw-bolder">MacBook Air</p>
            </div>
            <div class="col-12 col-md-4 px-3 d-flex flex-column justify-content-center align-items-center">
                <img src="iphone11-select-2019-family.png" class="w-75">
                <p class="mt-2 fs-4 fw-bolder">MacBook Air</p>
            </div>
            <div class="col-12 col-md-4 px-3 d-flex flex-column justify-content-center align-items-center">
                <img src="iphone11-select-2019-family.png" class="w-75">
                <p class="mt-2 fs-4 fw-bolder">MacBook Air</p>
            </div> -->
        </div>
        <div class="row bottom my-5">
            <!-- <div class="col-12 col-md-6 px-3 d-flex justify-content-start align-items-center flex-column">
                <div class="pos">
                    <img src="iphone11-select-2019-family.png" class="w-100">
                    <div class="my-3 d-flex justify-content-evenly w-100">
                        <div class="colorArea">
                            <input type="radio" class="btn-check" name="options" id="option1" autocomplete="off"
                                checked>
                            <label class="btn bg-danger rounded-circle colorCircle" for="option1"></label>
                            <p class="text-center my-2">red</p>
                        </div>
                        <div class="colorArea">
                            <input type="radio" class="btn-check" name="options" id="option2" autocomplete="off">
                            <label class="btn bg-danger rounded-circle colorCircle" for="option2"></label>
                            <p class="text-center my-2">red</p>
                        </div>
                    </div>
                    <div class="totle fw-bolder fs-4 text-center">
                        20000
                    </div>
                </div>
            </div>
            <div class="col-12 col-md-6 p-3 pe-5">
                <h3 class="fs-4 fw-bolder my-4">Choose your desirable upgrades</h3>
                <div>
                    <h4 class="my-3 fs-5 fw-bolder">Processor</h4>
                    <input type="radio" class="btn-check" name="optionsa" id="option3" autocomplete="off" checked>
                    <label class="text btn w-100 border border-dark d-flex my-3" for="option3">
                        <p class="col-8 my-3 text-start ps-2">Lorem ipsum dolor sit amet consectetur adipisicing elit.
                            Excepturi, saepe</p>
                        <span class="col-4 d-flex justify-content-center align-items-center">150US</span>
                    </label>
                    <input type="radio" class="btn-check" name="optionsa" id="option4" autocomplete="off">
                    <label class="text btn w-100 border border-dark d-flex my-3" for="option4">
                        <p class="col-8 my-3 text-start ps-2">Lorem ipsum dolor sit amet consectetur adipisicing elit.
                            Excepturi, saepe</p>
                        <span class="col-4 d-flex justify-content-center align-items-center">150US</span>
                    </label>
                </div>
                <div>
                    <h4 class="my-3 fs-5 fw-bolder">Processor</h4>
                    <input type="radio" class="btn-check" name="optionsb" id="option5" autocomplete="off" checked>
                    <label class="text btn w-100 border border-dark d-flex my-3" for="option5">
                        <p class="col-8 my-3 text-start ps-2">Lorem ipsum dolor sit amet consectetur adipisicing elit.
                            Excepturi, saepe</p>
                        <span class="col-4 d-flex justify-content-center align-items-center">150US</span>
                    </label>
                    <input type="radio" class="btn-check" name="optionsb" id="option6" autocomplete="off">
                    <label class="text btn w-100 border border-dark d-flex my-3" for="option6">
                        <p class="col-8 my-3 text-start ps-2">Lorem ipsum dolor sit amet consectetur adipisicing elit.
                            Excepturi, saepe</p>
                        <span class="col-4 d-flex justify-content-center align-items-center">150US</span>
                    </label>
                </div>
                <div>
                    <h4 class="my-3 fs-5 fw-bolder">Processor</h4>
                    <input type="radio" class="btn-check" name="optionsb" id="option5" autocomplete="off" checked>
                    <label class="text btn w-100 border border-dark d-flex my-3" for="option5">
                        <p class="col-8 my-3 text-start ps-2">Lorem ipsum dolor sit amet consectetur adipisicing elit.
                            Excepturi, saepe</p>
                        <span class="col-4 d-flex justify-content-center align-items-center">150US</span>
                    </label>
                    <input type="radio" class="btn-check" name="optionsb" id="option6" autocomplete="off">
                    <label class="text btn w-100 border border-dark d-flex my-3" for="option6">
                        <p class="col-8 my-3 text-start ps-2">Lorem ipsum dolor sit amet consectetur adipisicing elit.
                            Excepturi, saepe</p>
                        <span class="col-4 d-flex justify-content-center align-items-center">150US</span>
                    </label>
                </div>
                <div>
                    <h4 class="my-3 fs-5 fw-bolder">Processor</h4>
                    <input type="radio" class="btn-check" name="optionsb" id="option5" autocomplete="off" checked>
                    <label class="text btn w-100 border border-dark d-flex my-3" for="option5">
                        <p class="col-8 my-3 text-start ps-2">Lorem ipsum dolor sit amet consectetur adipisicing elit.
                            Excepturi, saepe</p>
                        <span class="col-4 d-flex justify-content-center align-items-center">150US</span>
                    </label>
                    <input type="radio" class="btn-check" name="optionsb" id="option6" autocomplete="off">
                    <label class="text btn w-100 border border-dark d-flex my-3" for="option6">
                        <p class="col-8 my-3 text-start ps-2">Lorem ipsum dolor sit amet consectetur adipisicing elit.
                            Excepturi, saepe</p>
                        <span class="col-4 d-flex justify-content-center align-items-center">150US</span>
                    </label>
                </div>
            </div> -->
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
        crossorigin="anonymous"></script>
    <script>
        const AppleUrl = "https://raw.githubusercontent.com/JIXUN0315/FileStorage/main/myAppleArray";
        let appleArr = [];
        let options = 0;
        let option = 0;
        let titleBtn, container, topArea, bottomArea, chooseBtn,total;

        window.onload = function () {
            requestJSON(AppleUrl);
            container = document.querySelector(".container");
            titleBtn = document.querySelectorAll(".title");
            topArea = document.querySelector(".top");
            bottomArea = document.querySelector(".bottom");
            titleBtn.forEach((topBtn, index) => {
                topBtn.addEventListener("click", () => {
                    let appleType = appleArr[index]; //手機/電腦/平板
                    topArea.innerHTML = "";
                    //////上半部圖片預覽機種區
                    appleType.forEach(model => {
                        topArea.innerHTML += `<div class="col-12 col-md-4 px-3 d-flex flex-column justify-content-center align-items-center chooseBtn">
                                                <img src=${model["color"][0]["img"]} class="w-75">
                                                <p class="mt-2 fs-4 fw-bolder">${model["name"]}</p>
                                                </div>`;
                        bottomArea.innerHTML = "";
                        //////下半部選擇區
                        chooseBtn = document.querySelectorAll(".chooseBtn");//將所有上半部的機種預覽圖片選取
                        chooseBtn.forEach((pic, ind) => {
                            pic.addEventListener("click", () => {
                                let everyType = appleType[ind];
                                let htmlStr = "";
                                let htmlSelect = "";
                                everyType["color"].forEach(x => {
                                    let colorName = x["colorName"];
                                    let rgb = x["rgb"];
                                    let img = x["img"];
                                    htmlStr += `<div class="colorArea d-flex flex-column justify-content-center align-items-center">
                                                    <input type="radio" class="btn-check" name="options${options}" id="option${option}" autocomplete="off">
                                                    <label class="btn rounded-circle colorCircle" style="background-color: ${rgb};" for="option${option}"></label>
                                                    <p class="text-center my-2">${colorName}</p>
                                                </div>`;
                                    option ++;
                                })
                                let desirableName = Object.keys(everyType["desirable"]);
                                let desirableValue = Object.values(everyType["desirable"]);
                                    desirableValue.forEach((p,idx) => {
                                        options++;
                                        let str = "";
                                        p.forEach(y=>{
                                            str += `<input type="radio" class="btn-check" name="options${options}" id="option${option}" autocomplete="off">
                                            <label class="text btn w-100 border border-primary d-flex my-3" for="option${option}">
                                                <p class="col-8 my-3 text-start ps-2">${y["text"]}</p>
                                                <span class="col-4 d-flex justify-content-center align-items-center">+${y["add"]} USD</span>
                                                </label>`
                                                option ++;
                                        })
                                        htmlSelect += `<div class="countArea">
                                            <h4 class="my-3 fs-5 fw-bolder">${desirableName[idx]}</h4>
                                            ${str}
                                            </div>`
                                        })
                                bottomArea.innerHTML = `<div class="col-12 col-md-6 px-3 d-flex justify-content-start align-items-center flex-column">
                                                            <div class="pos">
                                                                <img src=${everyType["color"][0]["img"]} class="w-100">
                                                                <div class="my-3 d-flex justify-content-evenly w-100">
                                                                    ${htmlStr}
                                                                </div>
                                                                <div class="total fw-bolder fs-4 text-center">
                                                                    $${everyType["price"]}
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-12 col-md-6 p-3 pe-5">
                                                            <h3 class="fs-4 fw-bolder my-4">Choose your desirable upgrades</h3>
                                                            ${htmlSelect}
                                                        </div>`
                                //////////設定選擇的按鈕
                                let colorBtnArr = document.querySelectorAll(".colorArea");
                                let choImg = document.querySelector(".pos img")
                                colorBtnArr.forEach((colorBtn, index) => {
                                    let colorBox = colorBtn.querySelector("label");
                                    colorBtn.addEventListener("click",()=>{
                                        choImg.src = everyType["color"][index]["img"];
                                    })
                                })
                                /////////設定價錢加購按鈕
                                // let total = document.querySelector(".total");
                                let priceBtnArea = document.querySelectorAll(".countArea");
                                let thisPrice = everyType.price;
                                let desArr = Object.values(everyType["desirable"]);
                                total = document.querySelector(".total");
                                priceBtnArea.forEach((Area, index1)=>{
                                    let priceBtn = Area.querySelectorAll("label");
                                    let current = 0
                                    priceBtn.forEach((addPrice, index2)=>{
                                        addPrice.addEventListener("click", ()=>{
                                            thisPrice -= current;
                                            thisPrice += desArr[index1][index2].add;
                                            current = desArr[index1][index2].add;
                                            total.innerText = `$${thisPrice}`;
                                        })
                                    })
                                })
                            })
                        })

                    })


                })
            })
        }

        function requestJSON(url) {
            let xhr = new XMLHttpRequest();
            xhr.onload = function () {
                appleArr = this.response;
            }
            xhr.open("GET", url);
            xhr.responseType = "json";
            xhr.send();
        }
    </script>
</body>

</html>